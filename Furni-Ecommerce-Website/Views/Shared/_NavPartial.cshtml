
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>
    .icon-button {
        background: none;
        border: none;
        color: white;
        font-size: 44px;
        width: 30px;
        height: 40px;
        padding: 0;
    }

    .transition {
        transition: all 0.3s ease-in-out;
    }

        .transition:hover {
            transform: scale(1.05);
            background-color: #3b5d50 !important;
            box-shadow: 0 0 15px rgba(0,0,0,0.15);
            color: #f8b810 !important;
        }

    .dropdown-menu {
        background-color: #f8f9fa;
        border: 1px solid rgba(0,0,0,.15);
        border-radius: 0.5rem;
        min-width: 200px;
        padding: 0;
        overflow: hidden;
    }

    .dropdown-item {
        color: #212529;
        padding: 0.75rem 1.5rem;
        width: 100%;
        display: block;
        text-align: left;
        position: relative;
        transition: all 0.2s ease;
    }

        .dropdown-item:hover,
        .dropdown-item:focus {
            background-color: #3b5d50;
            color: white !important;
            padding-left: 1.75rem;
        }

            .dropdown-item:hover::before {
                content: "";
                position: absolute;
                left: 0.75rem;
                top: 50%;
                transform: translateY(-50%);
                width: 4px;
                height: 60%;
                background-color: #d4a017;
                border-radius: 2px;
            }

    .dropdown-divider {
        margin: 0;
    }

    .dropdown-toggle::after {
        display: none !important;
    }

</style>

<nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">

    <div class="container">
        <a class="navbar-brand" href="index.html">Furni<span>.</span></a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarsFurni">
            
<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
    <li class="nav-item @(ViewContext.RouteData.Values["controller"].ToString() == "Home" && ViewContext.RouteData.Values["action"].ToString() == "Index" ? "active" : "")">
        <a class="nav-link" asp-controller="Home" asp-action="Index">Home</a>
    </li>
    <li class="nav-item @(ViewContext.RouteData.Values["controller"].ToString() == "Shop" ? "active" : "")">
        <a class="nav-link" asp-controller="Shop" asp-action="Index">Shop</a>
    </li>
    <li class="nav-item @(ViewContext.RouteData.Values["controller"].ToString() == "About" ? "active" : "")">
        <a class="nav-link" asp-controller="Home" asp-action="About">About us</a>
    </li>
    <li class="nav-item @(ViewContext.RouteData.Values["action"].ToString() == "Services" ? "active" : "")">
        <a class="nav-link" asp-controller="Home" asp-action="Services">Services</a>
    </li>
    <li class="nav-item @(ViewContext.RouteData.Values["action"].ToString() == "Blog" ? "active" : "")">
        <a class="nav-link" asp-controller="Home" asp-action="Blog">Blog</a>
    </li>
    <li class="nav-item @(ViewContext.RouteData.Values["action"].ToString() == "Contact" ? "active" : "")">
        <a class="nav-link" asp-controller="Contact" asp-action="Contact">Contact us</a>
    </li>
</ul>


            <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
                <li>
                    @if (User.Identity.IsAuthenticated)
                    {
                        <!-- Person button for logged in users -->
                        <div class="dropdown me-4">
                            <button class="icon-button" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <img class="image-person" src="~/images/user.svg">
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                <li style="margin-right:-20px !important"><a class="dropdown-item" asp-controller="Profile" asp-action="Index">Profile</a></li>
                                <li><a class="dropdown-item" asp-controller="Profile" asp-action="PurchaseHistory">Purchase History</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" asp-controller="Auth" asp-action="Logout">Logout</a></li>
                            </ul>
                        </div>
                    }
                    else
                    {
                        <!-- Person button for guests -->
                        <button type="button" class="icon-button" data-bs-toggle="modal" data-bs-target="#authModal">
                            <img class="image-person" src="~/images/user.svg">
                        </button>

                        <!-- Modal for login/register -->
                        <div class="modal fade" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content text-center rounded-4 shadow-lg animate__animated animate__fadeInDown"
                                     style="background: url('https://images.unsplash.com/photo-1604147706284-3d2e3a8d01d9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80') no-repeat center center / cover; backdrop-filter: blur(10px); border: 2px solid #3b5d50;">
                                    <div style="background-color: rgba(255, 255, 255, 0.85); border-radius: 1rem;">
                                        <div class="modal-header text-white rounded-top-4 border-0"
                                             style="background-color: #3b5d50;">
                                            <h5 class="modal-title w-100">Welcome</h5>
                                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body py-4">
                                            <p class="text-muted mb-4 fs-5">Choose how you'd like to continue</p>
                                            <div class="d-grid gap-3 col-10 mx-auto">
                                                <a asp-controller="Auth" asp-action="Login" class="btn btn-lg rounded-pill shadow-sm transition"
                                                   style="background-color: rgba(59, 93, 80, 0.1); color: #3b5d50; border: 2px solid #3b5d50;">
                                                    <i class="bi bi-box-arrow-in-right me-2"></i> Login
                                                </a>
                                                <a asp-controller="Auth" asp-action="Register" class="btn btn-lg rounded-pill shadow-sm transition"
                                                   style="background-color: rgba(248, 184, 16, 0.1); color: #f8b810; border: 2px solid #f8b810;">
                                                    <i class="bi bi-person-plus me-2"></i> Register
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </li>
                
                      <li><a class="nav-link" href="/CartItem">
                            <img src="~/images/cart.svg" class="cart-icon">
                        <span id="cart-count" class="notification-badge">0</span>
                        </a></li>


              		<li>
                    <a class="nav-link" asp-action="Favorite" asp-controller="Home" style="position: relative;">
                    <i class="bi bi-heart  me-2 fs-5 "style="position:relative;"></i>

                        <span id="fav-count" class="fav-counter notification-badge">0</span>
								
					</a>
					 </li>

            </ul>
        </div>
    </div>
</nav>

  <style>

	.icon-button {
	  background: none;
	  border: none;
	  color: white;
	  font-size: 44px;
		width:30px;
		height:40px;
	}
	.transition {
       transition: all 0.3s ease-in-out;
}

.transition:hover {
  transform: scale(1.05);
  background-color: #3b5d50 !important;
  box-shadow: 0 0 15px rgba(0,0,0,0.15);
  color:#f8b810 !important;
}
.image-profile{
	width:40px;
	height:40px;
	border-radius:50%;
	display: inline-block;
    object-fit: cover;
}
.nav-link.dropdown-toggle::after {
  font-size: 1.2rem;        
  font-weight: bold;         
  vertical-align: middle;    
}
.dropdown-menu{
	background-color: #ccfbd1 !important;
}

	.bi-heart{
		margin-left:14px;
		color:white;

	}

	.bi-heart:hover{
		
		color: red;
	}
    .nav-link {
    position: relative;
}

.cart-icon {
    position: relative;
}

#cart-count {
    /* display: none; */
    right: 6px; 
    font-size: 0.8rem;
    padding: 0.2rem 0.5rem; 
    border-radius: 50%;
}

        /* #cart-count.d-none {  */
        /*      display: none;  */
        /* } */

        /* #cart-count:not(.d-none) {  */
        /*     display: block;  */
        /* } */
.dropdown-item:hover {
    width: 100%;
   
}

    /* تنسيق مشترك للعدادات */
    .notification-badge {
        position: absolute;
        top: 10px;
        right: 7px;
        transform: translate(50%, -50%);
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background-color: #f74545;
        color: white;
        font-size: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        box-shadow: 0 0 5px rgba(0,0,0,0.2);
    }

  </style>
